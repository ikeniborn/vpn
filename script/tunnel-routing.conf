# ===================================================================
# VLESS-Reality Tunnel Routing Configuration
# ===================================================================
# This configuration file defines the routing rules for the tunnel
# between Server 1 and Server 2. It is used by both setup scripts to
# ensure consistent routing configuration.
# ===================================================================

# Tunnel Configuration
#
# These settings define the basic tunnel parameters

# Network range for Outline VPN clients
OUTLINE_NETWORK="10.0.0.0/24"

# Do not tunnel local or private networks
# These networks will be accessed directly, not through the tunnel
LOCAL_NETWORKS=(
    "0.0.0.0/8"
    "10.0.0.0/8"
    "127.0.0.0/8"
    "169.254.0.0/16"
    "172.16.0.0/12"
    "192.168.0.0/16"
    "224.0.0.0/4"
    "240.0.0.0/4"
)

# IP Forwarding Configuration
#
# These settings control the IP forwarding behavior

# Enable IP forwarding (1 = enabled, 0 = disabled)
IP_FORWARD=1

# Forwarding Kernel Parameters
FORWARDING_PARAMS=(
    "net.ipv4.ip_forward=1"
    "net.ipv4.conf.all.forwarding=1"
    "net.ipv6.conf.all.forwarding=1"
    "net.ipv4.conf.all.route_localnet=1"
)

# Outline VPN Configuration
#
# These settings are specific to the Outline VPN server

# Outline API port
OUTLINE_API_PORT=41084

# Default Outline VPN port
OUTLINE_DEFAULT_PORT=7777

# v2ray Client Configuration
#
# These settings are for the v2ray client on Server 2

# Local SOCKS proxy port
V2RAY_SOCKS_PORT=1080

# Local HTTP proxy port
V2RAY_HTTP_PORT=8080

# Local transparent proxy port
V2RAY_TPROXY_PORT=1081

# Firewall Configuration
#
# These settings define the firewall rules for both servers

# Allow incoming SSH port
SSH_PORT=22

# Additional ports to open on Server 1
SERVER1_ADDITIONAL_PORTS=(
    # Format: "port/protocol"
    # Example: "80/tcp" for HTTP
)

# Additional ports to open on Server 2
SERVER2_ADDITIONAL_PORTS=(
    # Format: "port/protocol"
    # Example: "80/tcp" for HTTP
)

# Routing Configuration
#
# These settings define how traffic is routed between the servers

# Traffic from Outline VPN clients should be routed through the tunnel
ROUTE_OUTLINE_THROUGH_TUNNEL=true

# Server 1 should masquerade traffic from Server 2
SERVER1_MASQUERADE_TRAFFIC=true

# Server 2 should masquerade traffic from Outline clients
SERVER2_MASQUERADE_OUTLINE=true

# Advanced Routing Rules
#
# These are custom routing rules for special cases

# Define any custom routing rules here
# FORMAT: "source_ip|destination_ip|action"
# Where action is: "TUNNEL" or "DIRECT"
CUSTOM_ROUTES=(
    # Example: "192.168.1.0/24|0.0.0.0/0|TUNNEL"
    # Example: "0.0.0.0/0|192.168.2.0/24|DIRECT"
)

# End of configuration file